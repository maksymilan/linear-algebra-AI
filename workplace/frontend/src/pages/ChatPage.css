/* src/pages/ChatPage.css */

.chat-page-container {
    display: flex;
    height: 100vh;
    width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
    background-color: var(--color-background-primary);
}

/* --- 历史记录面板 --- */
.chat-history-panel {
    width: 280px;
    height: 100%;
    background-color: var(--color-background-secondary);
    border-right: 1px solid var(--color-border);
    flex-shrink: 0;
    transition: width 0.3s ease, min-width 0.3s ease;
    display: flex;
    flex-direction: column;
}

.chat-history-panel.collapsed {
    width: 72px;
    min-width: 72px;
}

/* --- 主问答面板 --- */
.qa-panel {
    flex-grow: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.chat-window {
    width: 100%;
    max-width: 900px;
    height: 100%;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    padding: 0 var(--spacing-md);
    box-sizing: border-box;
}

/* --- 聊天窗口头部 --- */
.chat-window-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--spacing-md) 0;
    border-bottom: 1px solid var(--color-border-light);
    flex-shrink: 0;
}

.chat-window-header h2 {
    margin: 0;
    font-size: 1.2rem;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.chat-window-header .actions {
    display: flex;
    gap: var(--spacing-sm);
}

.chat-window-header .vis-toggle-button {
    background: none;
    border: 1px solid var(--color-border);
    color: var(--color-text-secondary);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    transition: var(--transition-fast);
}

.chat-window-header .vis-toggle-button:hover {
    background-color: var(--color-background-secondary);
    color: var(--color-primary);
    border-color: var(--color-primary);
}

/* --- 欢迎界面 --- */
.welcome-screen {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding-bottom: 20vh;
}
.welcome-logo {
    width: 60px; height: 60px;
    margin-bottom: var(--spacing-lg);
    background-color: var(--color-background-tertiary);
    border-radius: 50%;
    display: flex;
    align-items: center; justify-content: center;
}
.welcome-logo svg { color: #495057; width: 32px; height: 32px; }
.welcome-screen h1 { font-size: 2.2rem; color: var(--color-text-primary); margin: 0 0 0.5rem 0; }
.welcome-screen p { font-size: 1.1rem; color: var(--color-text-secondary); margin: 0; }

/* --- 消息列表 --- */
.messages-list {
    flex-grow: 1;
    padding: 20px 0;
    display: flex;
    flex-direction: column;
    gap: 25px;
    overflow-y: auto;
}

.messages-list::-webkit-scrollbar { width: 8px; }
.messages-list::-webkit-scrollbar-track { background: var(--color-background-secondary); border-radius: 4px; }
.messages-list::-webkit-scrollbar-thumb { background-color: var(--color-border); border-radius: 4px; border: 2px solid transparent; background-clip: content-box; }
.messages-list::-webkit-scrollbar-thumb:hover { background-color: #ced4da; }

/* --- 消息容器与气泡 --- */
.message-container { display: flex; gap: 16px; max-width: 85%; }
.message-container.user { align-self: flex-end; flex-direction: row-reverse; }
.message-container.ai { align-self: flex-start; }
.avatar { width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0; background-color: #e9ecef; display: flex; align-items: center; justify-content: center; font-weight: 500; font-size: 1rem; }
.user-avatar-placeholder { background-color: var(--color-text-primary); color: white; }
.ai-avatar img { width: 40px; height: 40px; }
.message { padding: 12px 18px; border-radius: 18px; word-wrap: break-word; line-height: 1.6; }
.user-message { background-color: #f1f3f5; color: #212529; border-bottom-right-radius: 4px; }
.ai-message { background-color: var(--color-background-primary); border: 1px solid var(--color-border-light); color: #212529; border-bottom-left-radius: 4px; box-shadow: var(--shadow-sm); }


/* --- 消息输入区域 --- */
.message-form-container { padding: var(--spacing-md) 0 var(--spacing-lg) 0; flex-shrink: 0; }
.message-form { display: flex; align-items: flex-end; gap: 12px; background-color: #f1f3f5; padding: 8px; border-radius: 24px; }
.text-input { flex-grow: 1; padding: 10px 16px; border: none; background-color: transparent; color: #212529; font-size: 1rem; resize: none; max-height: 200px; overflow-y: auto; font-family: inherit; line-height: 1.5; }
.text-input:focus { outline: none; }
.attach-button, .send-button { background: none; border: none; cursor: pointer; padding: 10px; color: #495057; border-radius: 50%; transition: var(--transition-fast); flex-shrink: 0; align-self: flex-end; }
.attach-button:hover { background-color: #dee2e6; }
.send-button { background-color: #dee2e6; color: white; }
.send-button:not(:disabled) { background-color: var(--color-text-primary); }
.send-button:hover:not(:disabled) { background-color: #000; }
.send-button:disabled { cursor: not-allowed; opacity: 0.5; }

/* --- 可视化面板 --- */
.visualization-panel { flex-shrink: 0; width: 35%; min-width: 400px; height: 100%; position: relative; background-color: var(--color-background-secondary); border-left: 1px solid var(--color-border); transition: width 0.3s ease, min-width 0.3s ease, transform 0.3s ease; display: flex; flex-direction: column; overflow: hidden; }
.visualization-panel.collapsed { width: 0; min-width: 0; border-left: none; transform: translateX(100%); }
.visualization-panel.collapsed .vis-container { opacity: 0; pointer-events: none; }

/* --- 打字中... 动态效果 --- */
.typing-indicator {
    display: flex;
    align-items: center;
    padding: 8px 0;
}
.typing-indicator span {
    height: 8px;
    width: 8px;
    float: left;
    margin: 0 1px;
    background-color: #9E9E9E;
    display: block;
    border-radius: 50%;
    opacity: 0.4;
    animation: typing-fade 1s infinite;
}
.typing-indicator span:nth-of-type(1) {
    animation-delay: 0s;
}
.typing-indicator span:nth-of-type(2) {
    animation-delay: 0.2s;
}
.typing-indicator span:nth-of-type(3) {
    animation-delay: 0.4s;
}
@keyframes typing-fade {
    0% { opacity: 0.4; }
    50% { opacity: 1; }
    100% { opacity: 0.4; }
}